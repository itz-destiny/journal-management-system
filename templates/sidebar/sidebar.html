{% load static %}
{% load auth_extras %}

<!------------------------------------------- Main Sidebar Container------------------------------------------------- -->
<aside class="main-sidebar sidebar-light elevation-4" style="background-color: white;">
  <!-- Brand Logo -->
  <a href="{% url 'home' %}" class="brand-link" style="text-decoration: none; display: block; padding: 1.5rem 1rem; border-bottom: 1px solid #e2e8f0;">
    <div style="display: flex; align-items: center; gap: 0.75rem;">
      <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #1f3c88 0%, #162b63 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.3rem;">
        U
      </div>
      <div>
        <div style="font-weight: 700; color: #1e293b; font-size: 1.1rem;">UNIQUE JMS</div>
        <div style="font-size: 0.75rem; color: #64748b;">Journal Management</div>
      </div>
    </div>
  </a>

  <!-----------------------------------------------Sidebar ----------------------------------------------->
  <div class="sidebar">
    <!-- User Panel -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
      <div class="image">
        <img src="{% static 'image/admin.png' %}" class="img-circle elevation-2" alt="User Image">
      </div>
      <div class="info">
        <a href="#" class="d-block">{{ request.user.username }}</a>
      </div>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
        
        <!-----------------------------------Admin Sidebar (Superuser or Admin Group)------------------------------------------>
        {% if request.user.is_superuser %}
          <!-- Superuser Menu -->
          {% include 'sidebar/admin_sidebar.html' %}

        <!-----------------------------------Admin Sidebar (Admin Group)------------------------------------------>
        {% elif request.user.groups.all.0.name == 'Admin' %}
          <!-- Admin Menu -->
          {% include 'sidebar/admin_sidebar.html' %}

        <!-----------------------------------Author/User Sidebar------------------------------------------>
        {% elif request.user.groups.all.0.name == 'User' %}
          <!-- Author Menu -->
          {% include 'sidebar/user_sidebar.html' %}

        <!-----------------------------------Reviewer Sidebar------------------------------------------>
        {% elif request.user.groups.all.0.name == 'Reviewer' %}
          <!-- Reviewer Menu -->
          {% include 'sidebar/reviewer_sidebar.html' %}

        <!-----------------------------------Editor Sidebar------------------------------------------>
        {% elif request.user.groups.all.0.name == 'Editor' %}
          <!-- Editor Menu -->
          {% include 'sidebar/editor_sidebar.html' %}
        
        {% else %}
          <!-- Default Menu - No Group Assigned -->
          <li class="nav-item">
            <a href="#" class="nav-link text-warning">
              <i class="fas fa-exclamation-triangle nav-icon"></i>
              <p>No Role Assigned</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'logout' %}" class="nav-link">
              <i class="fas fa-sign-out-alt nav-icon"></i>
              <p>Logout</p>
            </a>
          </li>
        {% endif %}

      </ul>
    </nav>
    <!-- /.sidebar-menu -->
  </div>
  <!-- /.sidebar -->
</aside>